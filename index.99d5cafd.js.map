{"mappings":"","sources":["View.js"],"sourcesContent":["'use strict';\nclass View{\n\n  constructor(model){\n    this.model = model;\n    // chart metadata   \n      this.chart = null;\n      this.ctx =  document.getElementById('myChart');      \n      this.ctx.width = 500;\n      this.ctx.height = 500;\n\n  \n\n      this.colors={\n        'slate700': 'rgb(51 65 85)',\n        'zinc50': 'rgb(250 250 250)'\n      };\n      this.stylesTable={\n        border: \"border-solid border-2 border-slate-700\"\n      };\n\n      this.chartMetadata={\n      \n        data: {\n          labels: ['GoldBees', 'SilverBees', 'NiftyBees', 'BankBees', 'LiquidBees (Emegerency Fund)', 'LiquidBees (Reserved for Buying Gold, Silver, Nifty and BankBees)'],\n          datasets: [{\n            label: 'Investment ₹',\n            data: [1073, 1013, 3344, 8036, 69000, 51000],\n            borderWidth: 1,\n          }]\n        },\n        options: {\n          scales: {\n            x: {\n              beginAtZero: true,\n              ticks:{\n                color:this.colors.slate700,\n              },\n              grid: {\n                color:this.colors.slate700,\n              },            \n            },\n            y: {\n              beginAtZero: true,\n              ticks:{\n                color:this.colors.slate700,\n              },\n              grid: {\n                color:this.colors.slate700,\n              }               \n            }          \n          },\n          plugins: {\n            legend: {\n              labels: {\n                color:this.colors.zinc50,\n                font: {\n                  family: 'Roboto',\n                  size: '20px', // Change the size according to your preference                \n                  weight: 'semibold' // Change the weight (normal, bold, 100-900)\n                }              \n              }\n\n            }\n          }\n\n\n        }\n      }\n    // canvas configure\n    // this.configureCanvas();\n\n\n    // event listeners and DOM Fetching\n      this.tableInvestmentData = document.querySelector('table#tableInvestmentData');\n      // console.log(this.tableInvestmentData);\n      this.selectChartType = document.querySelector('select#selectChartType');\n      this.selectChartType.addEventListener('change', ()=>{\n        // console.log(this.selectChartType.value);\n        this.updateChartType(this.selectChartType.value);        \n      });\n      window.addEventListener('resize', this.throttling(this.resizeChart, 200, this.ctx));\n\n    // generating investment table\n      this.generateInvestmentTable();\n// this.updateChartType('pie');\n// this.selectChartType.classList.remove('displayNone'); \n\n\n    \n  }\n\n\n  throttling(callback, delay, ctx){\n    let intervalId=null;\n    return ()=>{\n      if(intervalId !== null){\n        clearInterval(intervalId);        \n      }\n      intervalId = setTimeout(()=>{\n        callback(this.ctx);\n      },delay);\n    }\n  }\n\n  resizeChart(ctx){\n    if(window.innerWidth <=442){\n      ctx.style.width='300px';\n      ctx.style.height='300px';\n    }else if(window.innerWidth <=525){\n      ctx.style.width='400px';\n      ctx.style.height='400px';\n    }else{\n      ctx.style.width='500px';\n      ctx.style.height='500px';\n    }\n      // ctx.style='';\n      // ctx.width=300;\n      // ctx.height=300;\n      // console.log(ctx);\n  }\n\n  generateInvestmentTable(){\n    // console.log(this.tableInvestmentData);\n    // console.log(this.chartMetadata.data.labels);\n    // console.log(this.chartMetadata.data.datasets[0].data);\n    // generating table\n    let tr = document.createElement('tr');\n      tr.className = \"flex gap-[1rem]  text-center w-[20rem] p-[.2rem]\" ;\n      let srNo = document.createElement('th');\n        srNo.innerText = \"Sr.No.\";\n        srNo.className = \"text-slate-800 \";\n        tr.append(srNo);\n      let thInvestment = document.createElement('th');\n        thInvestment.innerText = \"Investment\";\n        thInvestment.className = \" text-slate-800  w-[7rem]\";\n        tr.append(thInvestment);\n      let thInvestmentValue = document.createElement('th');\n        thInvestmentValue.className = \" text-slate-800 \";\n        thInvestmentValue.innerText = \"Investment Amount\";\n        tr.append(thInvestmentValue);\n    this.tableInvestmentData.append(tr);\n\n    let idx = 0;\n    let interval = 0;\n    this.chartMetadata.data.datasets[0].data.forEach((amountInvested)=>{\n      setTimeout(()=>{\n        let tr = document.createElement('tr');\n         tr.className = `flex gap-[2rem] justify-center text-left ${this.stylesTable.border} p-[.5rem] w-[20rem]`;\n          let srNo = document.createElement('th');\n            srNo.innerText = idx+1;\n            srNo.className = \" text-zinc-50\";\n            tr.append(srNo);       \n          let tdInvestment = document.createElement('td');\n            tdInvestment.className = \"investmentName text-zinc-50 w-[10rem]\";\n            tdInvestment.innerText = this.chartMetadata.data.labels[idx];\n            tr.append(tdInvestment);\n          let tdInvestmentValue = document.createElement('td');\n            tdInvestmentValue.className = \"  text-zinc-50\";\n            tdInvestmentValue.innerText = '₹ ' + amountInvested;\n            tr.append(tdInvestmentValue);\n        this.tableInvestmentData.append(tr);   \n        \n        idx++;   \n        if(idx === this.chartMetadata.data.labels.length){     \n          // return ;     \n          // drawing chart           \n          setTimeout(()=>{\n            this.tableInvestmentData.classList.add('displayNone');\n            this.selectChartType.classList.remove('displayNone');            \n            \n            \n            this.updateChartType('pie');\n          },2000);\n\n\n        }\n        \n      },interval);\n      interval+=200;\n    });\n\n\n\n  }\n  updateChartType(chartType){\n    if(this.chart){\n      this.chart.destroy();\n    }\n    setTimeout(()=>{\n      this.chart = new Chart(this.ctx, {\n        type: chartType, // good one are: pie, bar, doughnut\n        data: {...this.chartMetadata.data},\n        options: {...this.chartMetadata.options}\n      });\n      this.resizeChart(this.ctx);\n      setTimeout(()=>{\n        anime({\n          targets: '#myChart',\n          scale: [\n            {value: .7, easing: 'easeOutSine', duration: 300},\n            {value: 1, easing: 'easeInOutQuad', duration: 1500}\n          ],\n\n        });\n      },100);\n\n    },300);\n\n\n  }  \n\n\n\n  \n}  \n\n// export default View;"],"names":[],"version":3,"file":"index.99d5cafd.js.map"}